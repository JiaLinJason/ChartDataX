webpackJsonp([1],{0:function(t,e){},1:function(t,e){},2:function(t,e){},ESFZ:function(t,e){},"F/67":function(t,e){},J4v1:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},n,!1,function(t){a("J4v1")},null,null).exports,r=a("zL8q"),o=a.n(r),c=(a("uJe8"),a("tvR6"),a("/ocq")),l=a("//Fk"),d=a.n(l),u=a("mvHQ"),h=a.n(u),p=a("Gu7T"),v=a.n(p),f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-header",[e("div",{staticClass:"header"},[e("span",{staticClass:"title"},[this._v("\n                ChartData\n                "),e("label",{staticClass:"special-chart"},[this._v("X")])])])]),this._v(" "),e("el-main",[e("div",{staticClass:"main"},[this._t("default")],2)])],1)},staticRenderFns:[]};var m=a("VU/8")({name:"MainPageLayout"},f,!1,function(t){a("ESFZ")},"data-v-2d08e068",null).exports;var _={simpleClone:function(t){return JSON.parse(h()(t))}},C=a("uXZL"),g=a.n(C),y={name:"Card",props:{chartName:{type:String},chartId:{type:Number},isButton:{require:!0,type:Boolean}},data:function(){return{visible:!1}},methods:{deleteClick:function(){this.visible=!1,this.$emit("cardDelete",this.chartId)},handleCardClick:function(){this.$emit("cardClick",this.isButton,this.chartId)}}},D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{padding:"10px"}},[i("div",{staticClass:"card"},[t.isButton?i("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[i("div",{staticClass:"wrapper",on:{click:t.handleCardClick}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"34px","line-height":"265px"}})])]):i("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[i("div",{staticClass:"wrapper"},[i("img",{attrs:{src:a("mjAv")},on:{click:t.handleCardClick}}),t._v(" "),i("div",{staticClass:"operator"},[i("div",{staticClass:"title text-ellipsis"},[t._v(t._s(t.chartName))]),t._v(" "),i("el-popover",{attrs:{placement:"top"},scopedSlots:t._u([{key:"reference",fn:function(){return[i("i",{staticClass:"el-icon-delete icon-btn",staticStyle:{color:"#F56C6C"}})]},proxy:!0}]),model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("p",[t._v("确定删除此表格吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.deleteClick}},[t._v("确定")])],1)]),t._v(" "),i("i",{staticClass:"el-icon-edit icon-btn"})],1)])])],1)])},staticRenderFns:[]};var b=a("VU/8")(y,D,!1,function(t){a("F/67")},"data-v-48294dcd",null).exports,x=a("gUwQ"),w={name:"Chart",props:{chartData:{type:Object}},data:function(){return{chartInstance:null}},watch:{chartData:function(){this.chartInstance.setOption&&this.chartInstance.setOption(this.chartData)}},beforeDestroy:function(){this.destroyInstance(),window.onresize=null},mounted:function(){this.initChart()},methods:{initChart:function(){null!==this.chartInstance&&this.destroyInstance();var t=document.getElementById("chartDom"),e=x.a(t);window.onresize=function(){e.resize()},this.chartInstance=e,e.setOption(this.chartData)},destroyInstance:function(){this.chartInstance.dispose&&this.chartInstance.dispose()}}},k={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"chart",attrs:{id:"chartDom"}})},staticRenderFns:[]};var A={name:"MainPage",data:function(){return{showAddDialog:!1,showDetailDialog:!1,showChart:!1,objectName:"",currentUploadData:{},list:[],currentProjectName:"",currentChartData:{}}},computed:{chartList:function(){return[].concat(v()(this.list),[{id:9999,title:""}])}},methods:{cardClick:function(t,e){var a=this;if(t)this.showAddDialog=!0;else{var i=_.simpleClone(this.list).find(function(t){return t.id===e}),n=i.data,s=n.series.map(function(t){return t.name});this.currentProjectName=i.title,this.currentChartData={tooltip:{trigger:"axis"},legend:{data:s},xAxis:{type:"category",boundaryGap:!1,data:n.xAxisData},yAxis:{type:"value"},series:n.series},this.showChart=!0,this.$nextTick(function(){a.showDetailDialog=!0})}},clearDetailDialog:function(t){this.currentChartData={},this.currentProjectName="",this.showChart=!1,t()},clearAddDialog:function(t){this.objectName="",t()},addChart:function(){var t=this.objectName,e=_.simpleClone(this.currentUploadData);if("{}"!==h()(e)){this.objectName="",this.currentUploadData={};var a=_.simpleClone(this.list);a.push({id:a.length+1,title:t||"项目"+(Number(a.length)+1),data:e}),this.list=a,this.showAddDialog=!1}else this.$message.error("必须上传一个文件以创建图表项目")},chartUpload:function(t,e){var a=this,i={0:t.raw};this.readExcel(i).then(function(t){Array.isArray(t)&&function(){var e,a=[];for(var i in t[0])"__EMPTY"!==i&&a.push(i);e=t.map(function(t){var e=[];for(var a in t)"__EMPTY"!==a&&e.push(t[a]);return{name:t.__EMPTY,type:"line",data:e}}),this.currentUploadData={xAxisData:a,series:e}}.bind(a)()}).catch(function(t){a.$message.error(t.message)})},readExcel:function(t){return new d.a(function(e,a){if(t.length<=0)a(new Error("未选择文件"));else if(/\.(xls|xlsx)$/.test(t[0].name.toLowerCase())){var i=new FileReader;i.onload=function(t){try{var i=t.target.result,n=g.a.read(i,{type:"binary"}),s=n.SheetNames[0],r=g.a.utils.sheet_to_json(n.Sheets[s]);e(r)}catch(t){return a(t),!1}},i.readAsBinaryString(t[0])}else a(new Error("上传格式不正确，请上传xls或者xlsx格式"))})},cardDelete:function(t){var e=_.simpleClone(this.list),a=e.findIndex(function(e){return e.id===t});-1!==a?(e.splice(a,1),this.$message({message:"删除成功",type:"success"})):this.$message.error("删除失败，原因: ID不存在"),this.list=e}},components:{"main-layout":m,Card:b,Chart:a("VU/8")(w,k,!1,function(t){a("ZoQ6")},"data-v-33c3b2a6",null).exports}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main-layout",[a("el-row",t._l(t.chartList,function(e){return a("el-col",{key:e.id,attrs:{span:4}},[a("card",{attrs:{chartId:e.id,chartName:e.title,isButton:9999===e.id},on:{cardClick:t.cardClick,cardDelete:t.cardDelete}})],1)}),1),t._v(" "),a("el-dialog",{attrs:{title:"创建项目","destroy-on-close":"","before-close":t.clearAddDialog,visible:t.showAddDialog,width:"30%"},on:{"update:visible":function(e){t.showAddDialog=e}}},[a("div",[t._v("\n        项目名称:\n        "),a("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:t.objectName,callback:function(e){t.objectName=e},expression:"objectName"}}),t._v(" "),a("el-divider"),t._v(" "),a("el-upload",{ref:"excel-upload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",accept:".xls,.xlsx",limit:1,"on-change":t.chartUpload,"auto-upload":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传xls/xlsx文件，且不超过500kb")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showAddDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addChart}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{"destroy-on-close":"","close-on-click-modal":!1,"before-close":t.clearDetailDialog,title:t.currentProjectName,visible:t.showDetailDialog,width:"70%"},on:{"update:visible":function(e){t.showDetailDialog=e}}},[a("div",[t.showChart?a("chart",{attrs:{chartData:t.currentChartData}}):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showDetailDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showDetailDialog=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var j=a("VU/8")(A,N,!1,function(t){a("ytBG")},"data-v-6dfa0962",null).exports;i.default.use(c.a);var I=new c.a({mode:"hash",routes:[{path:"/",name:"MainPage",component:j}]});i.default.config.productionTip=!1,i.default.use(o.a),new i.default({el:"#app",router:I,components:{App:s},template:"<App/>"})},ZoQ6:function(t,e){},mjAv:function(t,e,a){t.exports=a.p+"static/img/card.097c089.png"},tvR6:function(t,e){},ytBG:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b2bce106d479e39692d0.js.map